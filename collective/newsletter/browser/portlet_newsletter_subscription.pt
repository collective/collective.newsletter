<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      i18n:domain="collective.newsletter">

  <body>
    <metal:newsletter-subscription-portlet define-macro="portlet">

      <div tal:define="view portal/@@newsletter_subscription_view;
		       mailinglists view/getMailingLists"
	   tal:condition="mailinglists">

	<dl class="portlet" id="portlet-newsletter-subscription">
	  <dt class="portletHeader">
	    <span class="portletTopLeft"></span>
	    <span class="tile">Newsletter</span>
	    <span class="portletTopRight"></span>
	  </dt>

	  <dd class="portletItem odd">
	    <form action="newsletter-subscribe"
		  name="newslettersubscribeform"
		  method="post"
		  tal:attributes="action string:$portal_url/newsletter-subscribe">

	      <input name="form.submitted" value="1" type="hidden"/>
	      <input name="js_enabled" id="js_enabled" value="0" type="hidden" />
	      <input name="cookies_enabled" id="cookies_enabled" value="" type="hidden" />

	      <input name="subscribe" type="hidden"/>

	      <div class="field">
		<label i18n:translate="label_email_address"
		       for="subemail">Your e-mail address</label>
		<br />
		<input size="20" type="text" id="subemail" name="subemail" />
	      </div>

	      <div tal:condition="python: len(mailinglists) > 1"
		   class="field">
		<select name="list">
		  <option value="" i18n:translate="option_select_list">
		    Select list...
		  </option>
		  <option tal:repeat="list mailinglists"
			  tal:attributes="value list/id"
			  tal:content="list/name">
		    List name
		  </option>
		</select>
	      </div>

	      <input type="hidden"
		     name="list"
		     tal:condition="python: len(mailinglists) == 1"
		     tal:repeat="list mailinglists"
		     tal:attributes="value list/id" />

	      <div class="visualClear" id="clear-space-before-submit"><!-- --></div>

	      <div class="formControls">
		<input class="context"
                       tabindex=""
                       type="submit"
                       name="subscribe"
                       value="Subscribe"
                       i18n:attributes="value label_subscribe"
                       tal:attributes="tabindex tabindex/next"
                       onClick="this.form.elements['subscribe'].value='1'"
		       />
              </div>

	    </form>
	  </dd>
	  <dd class="portletFooter">
	    <span class="portletBottomLeft"></span>
	    <span class="portletBottomRight"></span>
	  </dd>
	</dl>
      </div>
    </metal:newsletter-subscription-portlet>
  </body>
</html>
